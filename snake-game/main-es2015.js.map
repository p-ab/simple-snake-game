{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/grid-layout/grid-layout.component.ts","./src/app/grid-layout/grid-layout.component.html","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'snake-game';\n}\n","<p>Snake game</p>\n\n<app-grid-layout></app-grid-layout>\n<hr>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { GridLayoutComponent } from './grid-layout/grid-layout.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    GridLayoutComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, HostListener, OnDestroy } from '@angular/core';\nimport { Observable, interval, defer, BehaviorSubject } from 'rxjs';\nimport { filter, map, switchMap, withLatestFrom, repeat } from 'rxjs/operators';\n\nenum KeyCodeEnum {\n  right = 39, left = 37, up = 38, down = 40,\n  space = 32, enter = 13\n}\ninterface SnakeInterface {\n  positions: number[];\n  points: number;\n  speed: number;\n  direction: 'right'|'left'|'up'|'down';\n  orientation: 'horizontal'|'vertical';\n}\n@Component({\n  selector: 'app-grid-layout',\n  templateUrl: './grid-layout.component.html',\n  styleUrls: ['./grid-layout.component.scss']\n})\nexport class GridLayoutComponent implements OnInit {\n\n  grid = {\n    rows: 10, columns: 10,\n    getTotal() { return this.rows * this.columns; }\n  };\n  defaultSpeed = 700;\n  snake: SnakeInterface;\n\n  feed = { points: 10, position: null };\n\n  gameStates = { isOver: false, isPaused: false, isStarted: false };\n  gameObserver: { time: Observable<any> };\n  pauseSubject = new BehaviorSubject(true);\n  intervalSubject = new BehaviorSubject(this.defaultSpeed);\n\n  iterations = 0;\n  keyboardLocked = false;\n\n  @HostListener('window:keyup', ['$event'])\n  keyEvent(event: KeyboardEvent) {\n    // tslint:disable-next-line: deprecation\n    switch (event.keyCode) {\n      case KeyCodeEnum.right: this.changeDirection('right'); break;\n      case KeyCodeEnum.up: this.changeDirection('up'); break;\n      case KeyCodeEnum.left: this.changeDirection('left'); break;\n      case KeyCodeEnum.down: this.changeDirection('down'); break;\n      case KeyCodeEnum.space:\n        this.togglePause();\n        break;\n      case KeyCodeEnum.enter:\n        this.initGame();\n        break;\n      default:\n        this.changeDirection('right');\n    }\n  }\n\n  @HostListener('window:keydown', ['$event'])\n  preventScroll(event) {\n    switch (event.keyCode) {\n      case 37: case 39: case 38:  case 40:\n      case 32: event.preventDefault(); break;\n      default: break;\n    }\n  }\n  constructor() {}\n\n  ngOnInit() {\n    this.initGame();\n  }\n\n  initGame() {\n    this.gameStates.isOver = false;\n    this.snake = {\n      positions: [], points: 0, speed: this.defaultSpeed,\n      direction: 'right', orientation: 'horizontal'\n    };\n    this.feed = { points: 10, position: null };\n\n    const initPos = this.randomPos();\n    const indent = initPos % this.grid.columns;\n    const startPos = this.grid.columns - indent < 3 ? initPos - 3 : initPos;\n\n    this.snake.positions.push(startPos);\n    this.feed.position = this.randomPos();\n\n    this.gameStates.isStarted = true;\n    this.gameStates.isPaused = true;\n\n    this.gameObserver = this.getTimer(this.pauseSubject);\n  }\n\n  // to-do: rewrite.\n  togglePause() {\n    if (this.gameStates.isPaused) {\n      this.gameStates.isPaused = false;\n      this.pauseSubject.next(false);\n    } else {\n      this.gameStates.isPaused = true;\n      this.pauseSubject.next(true);\n    }\n  }\n\n  getTimer(pause: BehaviorSubject<boolean>) {\n    const pausable$ = defer(() => {\n      return this.intervalSubject.pipe(\n        switchMap(value => interval(value)),\n        withLatestFrom(pause),\n        filter(([v, paused]) => !paused),\n        repeat(),\n        map(() => {\n          this.intervalSubject.next(this.snake.speed);\n          this.gameAction();\n        })\n      );\n    });\n\n    return { time: pausable$ };\n  }\n\n  generateGridList() {\n    const list = [... Array(this.grid.getTotal()).keys()];\n    return list;\n  }\n\n  randomPos() {\n    // value from 0 (inclusive) to total grid cells count (exclusive):\n    const index = Math.trunc(Math.random() * this.grid.getTotal());\n    return this.snake.positions.indexOf(index) === -1 ? index : this.randomPos();\n  }\n\n  changeDirection(vector: 'right' | 'left' | 'up' | 'down') {\n    const {orientation} = this.snake;\n    const horCondition = ['right', 'left'].indexOf(vector) === -1 && orientation === 'horizontal';\n    const vertCondition = ['up', 'down'].indexOf(vector) === -1 && orientation === 'vertical';\n    if (!this.keyboardLocked && (horCondition || vertCondition)) {\n      this.keyboardLocked = true;\n      this.snake.orientation = orientation === 'vertical' ? 'horizontal' : 'vertical';\n      this.snake.direction = vector;\n    }\n  }\n\n  gameAction() {\n    const moveSnake = () => {\n      const {rows, columns} = this.grid;\n      const {direction, positions} = this.snake;\n      const tailPos = positions.slice(0, -1);\n      const headPos = this.makeStep(positions[0], direction);\n      const coords = (() => {\n        // y reffers to rows, x reffers to columns\n        const y = Math.trunc(positions[0] / columns);\n        const x = positions[0] - y * columns;\n        return {x, y};\n      })();\n\n      const collisionTriggers = [\n        direction === 'right' && coords.x === columns - 1,\n        direction === 'left' && coords.x === 0,\n        direction === 'down' && coords.y === rows - 1,\n        direction === 'up' && coords.y === 0,\n        tailPos.indexOf(headPos) !== -1\n      ];\n      for (const collision of collisionTriggers) {\n        if (collision) { this.setError('Whoops'); }\n      }\n\n      let rewardEl: number;\n      if (headPos === this.feed.position) { rewardEl = this.rewardForFeed(); }\n      this.snake.positions = rewardEl === undefined ? [headPos, ...tailPos] : [headPos, ...tailPos, rewardEl];\n      this.keyboardLocked = false;\n      this.iterations++;\n      return this.iterations;\n    };\n    return moveSnake();\n  }\n\n  makeStep(position, direction) {\n    switch (direction) {\n      case 'right': return position + 1;\n      case 'left': return position - 1;\n      case 'up': return position - this.grid.columns;\n      case 'down': return position + this.grid.columns;\n    }\n  }\n\n  rewardForFeed() {\n    const {speed} = this.snake;\n    this.feed.position = this.randomPos();\n    this.feed.points += 20;\n    this.snake.points += this.feed.points;\n    this.snake.speed = speed > 120 ? speed - 70 : speed;\n    // return last snake element as a bonus\n    return this.snake.positions[this.snake.positions.length - 1];\n  }\n\n  setError(msg = '') {\n    if (msg) { console.error(msg); }\n    this.gameStates.isOver = true;\n    this.pauseSubject.next(true);\n    throw new Error('game over!');\n  }\n\n}\n","<section>\n  <div class=\"panel-info\">\n    <div class=\"score\">Your score: {{snake.points}}</div>\n    <div class=\"speed\">Snake's speed: {{1000 - snake.speed}}</div>\n  </div>\n  <div class=\"panel-controls\">\n    <button class=\"start\" *ngIf=\"gameStates.isPaused || gameStates.isOver\" (click)=\"initGame()\">\n      {{ gameStates.isOver ? 'New Game' : 'Shuffle' }}\n    </button>\n    <button class=\"toggle-play\" *ngIf=\"!gameStates.isOver\" (click)=\"togglePause()\">\n      {{ gameStates.isPaused ? 'Play' : 'Pause' }}\n    </button>\n  </div>\n</section>\n<div class=\"grid-container\" *ngIf=\"!gameStates.isOver; else gameOver\"\n  [style.--grid-color]=\"'#096792'\"\n  [style.--rows]=\"grid.rows\"\n  [style.--columns]=\"grid.columns\">\n  <div class=\"grid-cell\" *ngFor=\"let i of generateGridList()\"\n  [ngClass]=\"[i === feed.position ? 'feed' : '', snake.positions.indexOf(i) !== -1 ? 'snake-part' : '']\"></div>\n</div>\n<ng-template #gameOver>\n  <div class=\"big-caption\">Game Over!</div>\n</ng-template>\n<hr>\n<section>\n  <pre>Control by arrows, space - toggle pause/play, enter - reset game.\n    No records saving. Good luck.</pre>\n</section>\n<div>\n  <p>{{gameObserver.time | async}}</p>\n</div>\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}